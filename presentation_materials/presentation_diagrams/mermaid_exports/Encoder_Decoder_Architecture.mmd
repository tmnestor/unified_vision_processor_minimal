flowchart LR
    subgraph main ["How Modern Vision-Language Models Work"]
        direction LR
        B["VISION ENCODER<br/>• Image patches<br/>• Self-attention<br/>• Visual features"] --> C[Visual Representations]
        C --> G["CROSS-ATTENTION<br/>• Visual features as K,V<br/>• Text queries as Q<br/>• Attention weights"]
        D["LANGUAGE DECODER<br/>• Self-attention<br/>• Text generation<br/>• Reasoning"] --> G
        G --> D
        D --> E["STRUCTURED RESPONSE<br/>SUPPLIER: Hyatt Hotels<br/>ABN: 11 234 567 890<br/>AMOUNT: $31.33<br/>GST: $2.85"]
    end
    
    A[Document Image] --> B
    F[Text Prompt] --> D
    
    %% Styling
    classDef inputOutput fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    classDef encoder fill:#e8f5e8,stroke:#388e3c,stroke-width:2px,color:#000
    classDef decoder fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#000
    classDef intermediate fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#000
    classDef crossattention fill:#fce4ec,stroke:#e91e63,stroke-width:2px,color:#000
    
    class A,F,E inputOutput
    class B,B1 encoder
    class D,D1 decoder
    class C intermediate
    class G,G1 crossattention