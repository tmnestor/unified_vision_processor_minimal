flowchart LR
    subgraph layoutlm ["LayoutLM Pipeline"]
        direction TB
        L1[Document Image]
        L1 --> L2A[OCR Engine]
        L1 --> L2C[Layout Coordinates]
        
        L2A --> L3A[Text + Boxes]
        L2C --> L3C[2D Positions]
        
        L2A -.-> L7[OCR Failures]
        
        L3A --> L4[LayoutLM<br/>Transformer]
        L3C --> L4
        
        L8[Alignment Issues] -.-> L4
        
        L4 --> L5[Extracted Fields]
    end
    
    subgraph vit ["Vision-Language Model Pipeline"]
        direction TB  
        V1[Document Image] 
        V1 --> V2[Vision-Language<br/>Model]
        V2 --> V3[Extracted Fields]
        
        V7[âœ… End-to-End]
    end
    
    %% Force left-to-right layout with LayoutLM first
    layoutlm --- vit
    
    %% Styling
    classDef layoutlmNode fill:#ffebee,stroke:#d32f2f,stroke-width:2px,color:#000
    classDef vitNode fill:#e8f5e8,stroke:#388e3c,stroke-width:2px,color:#000
    classDef issues fill:#fce4ec,stroke:#e91e63,stroke-width:2px,color:#000
    classDef benefits fill:#f1f8e9,stroke:#689f38,stroke-width:2px,color:#000
    
    class L1,L2A,L2C,L3A,L3C,L4,L5 layoutlmNode
    class V1,V2,V3 vitNode
    class L6 issues
    class V4 benefits